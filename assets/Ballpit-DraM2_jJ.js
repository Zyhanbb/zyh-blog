var bi=Object.defineProperty;var Ht=s=>{throw TypeError(s)};var Mi=(s,e,t)=>e in s?bi(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var y=(s,e,t)=>Mi(s,typeof e!="symbol"?e+"":e,t),it=(s,e,t)=>e.has(s)||Ht("Cannot "+t);var m=(s,e,t)=>(it(s,e,"read from private field"),t?t.call(s):e.get(s)),k=(s,e,t)=>e.has(s)?Ht("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),F=(s,e,t,i)=>(it(s,e,"write to private field"),i?i.call(s,t):e.set(s,t),t),w=(s,e,t)=>(it(s,e,"access private method"),t);import{S as qt,B as Si,M as Vt,a as Ai,P as Jt,b as $,I as Kt,O as Qt,c as Di,r as nt,j as Ci,A as Pi,C as zi,d as Ei,W as ki,e as Ri,f as ce,V as rt,g as Li,h as Ti,i as Oi,k as st,R as Yi,l as Xi,m as P,n as Fi,o as Bi}from"./index-D1vqzENk.js";import{g as Ii}from"./index-CH_iu5NA.js";class Hi extends qt{constructor(){super();const e=new Si;e.deleteAttribute("uv");const t=new Vt({side:Ai}),i=new Vt,r=new Jt(16777215,900,28,2);r.position.set(.418,16.199,.3),this.add(r);const l=new $(e,t);l.position.set(-.757,13.219,.717),l.scale.set(31.713,28.305,28.591),this.add(l);const a=new Kt(e,i,6),o=new Qt;o.position.set(-10.906,2.009,1.846),o.rotation.set(0,-.195,0),o.scale.set(2.328,7.905,4.651),o.updateMatrix(),a.setMatrixAt(0,o.matrix),o.position.set(-5.607,-.754,-.758),o.rotation.set(0,.994,0),o.scale.set(1.97,1.534,3.955),o.updateMatrix(),a.setMatrixAt(1,o.matrix),o.position.set(6.167,.857,7.803),o.rotation.set(0,.561,0),o.scale.set(3.927,6.285,3.687),o.updateMatrix(),a.setMatrixAt(2,o.matrix),o.position.set(-2.017,.018,6.124),o.rotation.set(0,.333,0),o.scale.set(2.002,4.566,2.064),o.updateMatrix(),a.setMatrixAt(3,o.matrix),o.position.set(2.291,-.756,-2.621),o.rotation.set(0,-.286,0),o.scale.set(1.546,1.552,1.496),o.updateMatrix(),a.setMatrixAt(4,o.matrix),o.position.set(-2.193,-.369,-5.547),o.rotation.set(0,.516,0),o.scale.set(3.875,3.487,2.986),o.updateMatrix(),a.setMatrixAt(5,o.matrix),this.add(a);const u=new $(e,re(50));u.position.set(-16.116,14.37,8.208),u.scale.set(.1,2.428,2.739),this.add(u);const p=new $(e,re(50));p.position.set(-16.109,18.021,-8.207),p.scale.set(.1,2.425,2.751),this.add(p);const c=new $(e,re(17));c.position.set(14.904,12.198,-1.832),c.scale.set(.15,4.265,6.331),this.add(c);const f=new $(e,re(43));f.position.set(-.462,8.89,14.52),f.scale.set(4.38,5.441,.088),this.add(f);const x=new $(e,re(20));x.position.set(3.235,11.486,-12.541),x.scale.set(2.5,2,.1),this.add(x);const b=new $(e,re(100));b.position.set(0,20,0),b.scale.set(1,.1,1),this.add(b)}dispose(){const e=new Set;this.traverse(t=>{t.isMesh&&(e.add(t.geometry),e.add(t.material))});for(const t of e)t.dispose()}}function re(s){const e=new Di;return e.color.setScalar(s),e}function Vi(s,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function Wi(s,e,t){return e&&Vi(s.prototype,e),s}/*!
 * Observer 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var A,Fe,T,W,G,he,$t,ee,be,ei,I,X,ti,ii=function(){return A||typeof window<"u"&&(A=window.gsap)&&A.registerPlugin&&A},ni=1,le=[],Y=[],Me=[],Se=Date.now,at=function(e,t){return t},Gi=function(){var e=be.core,t=e.bridge||{},i=e._scrollers,r=e._proxies;i.push.apply(i,Y),r.push.apply(r,Me),Y=i,Me=r,at=function(a,o){return t[a](o)}},Ni=function(e,t){return~Me.indexOf(e)&&Me[Me.indexOf(e)+1][t]},Ae=function(e){return!!~ei.indexOf(e)},C=function(e,t,i,r,l){return e.addEventListener(t,i,{passive:r!==!1,capture:!!l})},D=function(e,t,i,r){return e.removeEventListener(t,i,!!r)},Ye="scrollLeft",Xe="scrollTop",ct=function(){return I&&I.isPressed||Y.cache++},He=function(e,t){var i=function r(l){if(l||l===0){ni&&(T.history.scrollRestoration="manual");var a=I&&I.isPressed;l=r.v=Math.round(l)||(I&&I.iOS?1:0),e(l),r.cacheID=Y.cache,a&&at("ss",l)}else(t||Y.cache!==r.cacheID||at("ref"))&&(r.cacheID=Y.cache,r.v=e());return r.v+r.offset};return i.offset=0,e&&i},Ve={s:Ye,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:He(function(s){return arguments.length?T.scrollTo(s,Ne.sc()):T.pageXOffset||W[Ye]||G[Ye]||he[Ye]||0})},Ne={s:Xe,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Ve,sc:He(function(s){return arguments.length?T.scrollTo(Ve.sc(),s):T.pageYOffset||W[Xe]||G[Xe]||he[Xe]||0})},Ui=function(e,t){return(t&&t._ctx&&t._ctx.selector||A.utils.toArray)(e)[0]||(typeof e=="string"&&A.config().nullTargetWarn!==!1?console.warn("Element not found:",e):null)},ji=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},Wt=function(e,t){var i=t.s,r=t.sc;Ae(e)&&(e=W.scrollingElement||G);var l=Y.indexOf(e),a=r===Ne.sc?1:2;!~l&&(l=Y.push(e)-1),Y[l+a]||C(e,"scroll",ct);var o=Y[l+a],u=o||(Y[l+a]=He(Ni(e,i),!0)||(Ae(e)?r:He(function(p){return arguments.length?e[i]=p:e[i]})));return u.target=e,o||(u.smooth=A.getProperty(e,"scrollBehavior")==="smooth"),u},Gt=function(e,t,i){var r=e,l=e,a=Se(),o=a,u=t,p=Math.max(500,u*3),c=function(_,R){var E=Se();R||E-a>u?(l=r,r=_,o=a,a=E):r+=_},f=function(){l=r=0,o=a=0},x=function(_){var R=o,E=l,O=Se();return(_||_===0)&&_!==r&&c(_),a===o||O-o>p?0:(r+E)/(O-R)*1e3};return{update:c,reset:f,getVelocity:x}},_e=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},Nt=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},si=function(){be=A.core.globals().ScrollTrigger,be&&be.core&&Gi()},oi=function(e){return A=e||ii(),!Fe&&A&&typeof document<"u"&&document.body&&(T=window,W=document,G=W.documentElement,he=W.body,ei=[T,W,G,he],A.utils.clamp,ti=A.core.context||function(){},ee="onpointerenter"in he?"pointer":"mouse",$t=B.isTouch=T.matchMedia&&T.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in T||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,X=B.eventTypes=("ontouchstart"in G?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in G?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return ni=0},500),si(),Fe=1),Fe};Ve.op=Ne;Y.cache=0;var B=function(){function s(t){this.init(t)}var e=s.prototype;return e.init=function(i){Fe||oi(A)||console.warn("Please gsap.registerPlugin(Observer)"),be||si();var r=i.tolerance,l=i.dragMinimum,a=i.type,o=i.target,u=i.lineHeight,p=i.debounce,c=i.preventDefault,f=i.onStop,x=i.onStopDelay,b=i.ignore,_=i.wheelSpeed,R=i.event,E=i.onDragStart,O=i.onDragEnd,U=i.onDrag,pe=i.onPress,ve=i.onRelease,Ce=i.onRight,j=i.onLeft,Pe=i.onUp,dt=i.onDown,ft=i.onChangeX,gt=i.onChangeY,mt=i.onChange,pt=i.onToggleX,vt=i.onToggleY,yt=i.onHover,xt=i.onHoverEnd,Ue=i.onMove,wt=i.ignoreCheck,se=i.isNormalizer,_t=i.onGestureStart,bt=i.onGestureEnd,Mt=i.onWheel,St=i.onEnable,At=i.onDisable,Dt=i.onClick,ze=i.scrollSpeed,oe=i.capture,Ct=i.allowClicks,xi=i.lockAxis,Pt=i.onLockAxis;this.target=o=Ui(o)||G,this.vars=i,b&&(b=A.utils.toArray(b)),r=r||1e-9,l=l||0,_=_||1,ze=ze||1,a=a||"wheel,touch,pointer",p=p!==!1,u||(u=parseFloat(T.getComputedStyle(he).lineHeight)||22);var ye,Z,q,Ee,je,Ze,xe,n=this,qe=0,Je=0,ke=i.passive||!c&&i.passive!==!1,Re=Wt(o,Ve),Le=Wt(o,Ne),Ke=Re(),Qe=Le(),wi=~a.indexOf("touch")&&!~a.indexOf("pointer")&&X[0]==="pointerdown",Te=Ae(o),S=o.ownerDocument||W,J=[0,0,0],K=[0,0,0],zt=0,Et=function(){return zt=Se()},Q=function(h,v){return(n.event=h)&&b&&ji(h.target,b)||v&&wi&&h.pointerType!=="touch"||wt&&wt(h,v)},_i=function(){n._vx.reset(),n._vy.reset(),Z.pause(),f&&f(n)},we=function(){var h=n.deltaX=Nt(J),v=n.deltaY=Nt(K),M=Math.abs(h)>=r,L=Math.abs(v)>=r;mt&&(M||L)&&mt(n,h,v,J,K),M&&(Ce&&n.deltaX>0&&Ce(n),j&&n.deltaX<0&&j(n),ft&&ft(n),pt&&n.deltaX<0!=qe<0&&pt(n),qe=n.deltaX,J[0]=J[1]=J[2]=0),L&&(dt&&n.deltaY>0&&dt(n),Pe&&n.deltaY<0&&Pe(n),gt&&gt(n),vt&&n.deltaY<0!=Je<0&&vt(n),Je=n.deltaY,K[0]=K[1]=K[2]=0),(Ee||q)&&(Ue&&Ue(n),q&&(E&&q===1&&E(n),U&&U(n),q=0),Ee=!1),Ze&&!(Ze=!1)&&Pt&&Pt(n),je&&(Mt(n),je=!1),ye=0},kt=function(h,v,M){J[M]+=h,K[M]+=v,n._vx.update(h),n._vy.update(v),p?ye||(ye=requestAnimationFrame(we)):we()},Rt=function(h,v){xi&&!xe&&(n.axis=xe=Math.abs(h)>Math.abs(v)?"x":"y",Ze=!0),xe!=="y"&&(J[2]+=h,n._vx.update(h,!0)),xe!=="x"&&(K[2]+=v,n._vy.update(v,!0)),p?ye||(ye=requestAnimationFrame(we)):we()},$e=function(h){if(!Q(h,1)){h=_e(h,c);var v=h.clientX,M=h.clientY,L=v-n.x,H=M-n.y,tt=n.isDragging;n.x=v,n.y=M,(tt||(L||H)&&(Math.abs(n.startX-v)>=l||Math.abs(n.startY-M)>=l))&&(q=tt?2:1,tt||(n.isDragging=!0),Rt(L,H))}},et=n.onPress=function(d){Q(d,1)||d&&d.button||(n.axis=xe=null,Z.pause(),n.isPressed=!0,d=_e(d),qe=Je=0,n.startX=n.x=d.clientX,n.startY=n.y=d.clientY,n._vx.reset(),n._vy.reset(),C(se?o:S,X[1],$e,ke,!0),n.deltaX=n.deltaY=0,pe&&pe(n))},Oe=n.onRelease=function(d){if(!Q(d,1)){D(se?o:S,X[1],$e,!0);var h=!isNaN(n.y-n.startY),v=n.isDragging,M=v&&(Math.abs(n.x-n.startX)>3||Math.abs(n.y-n.startY)>3),L=_e(d);!M&&h&&(n._vx.reset(),n._vy.reset(),c&&Ct&&A.delayedCall(.08,function(){if(Se()-zt>300&&!d.defaultPrevented){if(d.target.click)d.target.click();else if(S.createEvent){var H=S.createEvent("MouseEvents");H.initMouseEvent("click",!0,!0,T,1,L.screenX,L.screenY,L.clientX,L.clientY,!1,!1,!1,!1,0,null),d.target.dispatchEvent(H)}}})),n.isDragging=n.isGesturing=n.isPressed=!1,f&&v&&!se&&Z.restart(!0),q&&we(),O&&v&&O(n),ve&&ve(n,M)}},Lt=function(h){return h.touches&&h.touches.length>1&&(n.isGesturing=!0)&&_t(h,n.isDragging)},Tt=function(){return(n.isGesturing=!1)||bt(n)},Ot=function(h){if(!Q(h)){var v=Re(),M=Le();kt((v-Ke)*ze,(M-Qe)*ze,1),Ke=v,Qe=M,f&&Z.restart(!0)}},Yt=function(h){if(!Q(h)){h=_e(h,c),Mt&&(je=!0);var v=(h.deltaMode===1?u:h.deltaMode===2?T.innerHeight:1)*_;kt(h.deltaX*v,h.deltaY*v,0),f&&!se&&Z.restart(!0)}},Xt=function(h){if(!Q(h)){var v=h.clientX,M=h.clientY,L=v-n.x,H=M-n.y;n.x=v,n.y=M,Ee=!0,f&&Z.restart(!0),(L||H)&&Rt(L,H)}},Ft=function(h){n.event=h,yt(n)},Bt=function(h){n.event=h,xt(n)},It=function(h){return Q(h)||_e(h,c)&&Dt(n)};Z=n._dc=A.delayedCall(x||.25,_i).pause(),n.deltaX=n.deltaY=0,n._vx=Gt(0,50),n._vy=Gt(0,50),n.scrollX=Re,n.scrollY=Le,n.isDragging=n.isGesturing=n.isPressed=!1,ti(this),n.enable=function(d){return n.isEnabled||(C(Te?S:o,"scroll",ct),a.indexOf("scroll")>=0&&C(Te?S:o,"scroll",Ot,ke,oe),a.indexOf("wheel")>=0&&C(o,"wheel",Yt,ke,oe),(a.indexOf("touch")>=0&&$t||a.indexOf("pointer")>=0)&&(C(o,X[0],et,ke,oe),C(S,X[2],Oe),C(S,X[3],Oe),Ct&&C(o,"click",Et,!0,!0),Dt&&C(o,"click",It),_t&&C(S,"gesturestart",Lt),bt&&C(S,"gestureend",Tt),yt&&C(o,ee+"enter",Ft),xt&&C(o,ee+"leave",Bt),Ue&&C(o,ee+"move",Xt)),n.isEnabled=!0,n.isDragging=n.isGesturing=n.isPressed=Ee=q=!1,n._vx.reset(),n._vy.reset(),Ke=Re(),Qe=Le(),d&&d.type&&et(d),St&&St(n)),n},n.disable=function(){n.isEnabled&&(le.filter(function(d){return d!==n&&Ae(d.target)}).length||D(Te?S:o,"scroll",ct),n.isPressed&&(n._vx.reset(),n._vy.reset(),D(se?o:S,X[1],$e,!0)),D(Te?S:o,"scroll",Ot,oe),D(o,"wheel",Yt,oe),D(o,X[0],et,oe),D(S,X[2],Oe),D(S,X[3],Oe),D(o,"click",Et,!0),D(o,"click",It),D(S,"gesturestart",Lt),D(S,"gestureend",Tt),D(o,ee+"enter",Ft),D(o,ee+"leave",Bt),D(o,ee+"move",Xt),n.isEnabled=n.isPressed=n.isDragging=!1,At&&At(n))},n.kill=n.revert=function(){n.disable();var d=le.indexOf(n);d>=0&&le.splice(d,1),I===n&&(I=0)},le.push(n),se&&Ae(o)&&(I=n),n.enable(R)},Wi(s,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),s}();B.version="3.13.0";B.create=function(s){return new B(s)};B.register=oi;B.getAll=function(){return le.slice()};B.getById=function(s){return le.filter(function(e){return e.vars.id===s})[0]};ii()&&A.registerPlugin(B);Ii.registerPlugin(B);var z,ie,ue,de,fe,De,ge,V,me,ne,g,ri,ai,ci,li,Be,hi,lt,ui,di,ht,ut,Ie,fi,gi;class Zi{constructor(e){k(this,g);k(this,z);k(this,ie);k(this,ue);k(this,de);k(this,fe);k(this,De,0);k(this,ge,new zi);k(this,V,{elapsed:0,delta:0});k(this,me,!1);k(this,ne,!1);y(this,"canvas");y(this,"camera");y(this,"cameraMinAspect");y(this,"cameraMaxAspect");y(this,"cameraFov");y(this,"maxPixelRatio");y(this,"minPixelRatio");y(this,"scene");y(this,"renderer");y(this,"size",{width:0,height:0,wWidth:0,wHeight:0,ratio:0,pixelRatio:0});y(this,"render",w(this,g,fi).bind(this));y(this,"onBeforeRender",()=>{});y(this,"onAfterRender",()=>{});y(this,"onAfterResize",()=>{});y(this,"isDisposed",!1);F(this,z,{...e}),w(this,g,ri).call(this),w(this,g,ai).call(this),w(this,g,ci).call(this),this.resize(),w(this,g,li).call(this)}resize(){let e,t;m(this,z).size instanceof Object?(e=m(this,z).size.width,t=m(this,z).size.height):m(this,z).size==="parent"&&this.canvas.parentNode?(e=this.canvas.parentNode.offsetWidth,t=this.canvas.parentNode.offsetHeight):(e=window.innerWidth,t=window.innerHeight),this.size.width=e,this.size.height=t,this.size.ratio=e/t,w(this,g,hi).call(this),w(this,g,ui).call(this),this.onAfterResize(this.size)}updateWorldSize(){if(this.camera.isPerspectiveCamera){const e=this.camera.fov*Math.PI/180;this.size.wHeight=2*Math.tan(e/2)*this.camera.position.length(),this.size.wWidth=this.size.wHeight*this.camera.aspect}else if(this.camera.isOrthographicCamera){const e=this.camera;this.size.wHeight=e.top-e.bottom,this.size.wWidth=e.right-e.left}}get postprocessing(){return m(this,ie)}set postprocessing(e){F(this,ie,e),this.render=e.render.bind(e)}clear(){this.scene.traverse(e=>{e.isMesh&&typeof e.material=="object"&&e.material!==null&&(Object.keys(e.material).forEach(t=>{const i=e.material[t];i&&typeof i=="object"&&typeof i.dispose=="function"&&i.dispose()}),e.material.dispose(),e.geometry.dispose())}),this.scene.clear()}dispose(){var e;w(this,g,gi).call(this),w(this,g,Ie).call(this),this.clear(),(e=m(this,ie))==null||e.dispose(),this.renderer.dispose(),this.isDisposed=!0}}z=new WeakMap,ie=new WeakMap,ue=new WeakMap,de=new WeakMap,fe=new WeakMap,De=new WeakMap,ge=new WeakMap,V=new WeakMap,me=new WeakMap,ne=new WeakMap,g=new WeakSet,ri=function(){this.camera=new Ei,this.cameraFov=this.camera.fov},ai=function(){this.scene=new qt},ci=function(){if(m(this,z).canvas)this.canvas=m(this,z).canvas;else if(m(this,z).id){const t=document.getElementById(m(this,z).id);t instanceof HTMLCanvasElement?this.canvas=t:console.error("Three: Missing canvas or id parameter")}else console.error("Three: Missing canvas or id parameter");this.canvas.style.display="block";const e={canvas:this.canvas,powerPreference:"high-performance",...m(this,z).rendererOptions??{}};this.renderer=new ki(e),this.renderer.outputColorSpace=Ri},li=function(){m(this,z).size instanceof Object||(window.addEventListener("resize",w(this,g,Be).bind(this)),m(this,z).size==="parent"&&this.canvas.parentNode&&(F(this,ue,new ResizeObserver(w(this,g,Be).bind(this))),m(this,ue).observe(this.canvas.parentNode))),F(this,de,new IntersectionObserver(w(this,g,di).bind(this),{root:null,rootMargin:"0px",threshold:0})),m(this,de).observe(this.canvas),document.addEventListener("visibilitychange",w(this,g,ht).bind(this))},Be=function(){m(this,fe)&&clearTimeout(m(this,fe)),F(this,fe,window.setTimeout(this.resize.bind(this),100))},hi=function(){this.camera.aspect=this.size.width/this.size.height,this.camera.isPerspectiveCamera&&this.cameraFov&&(this.cameraMinAspect&&this.camera.aspect<this.cameraMinAspect?w(this,g,lt).call(this,this.cameraMinAspect):this.cameraMaxAspect&&this.camera.aspect>this.cameraMaxAspect?w(this,g,lt).call(this,this.cameraMaxAspect):this.camera.fov=this.cameraFov),this.camera.updateProjectionMatrix(),this.updateWorldSize()},lt=function(e){const i=Math.tan(ce.degToRad(this.cameraFov/2))/(this.camera.aspect/e);this.camera.fov=2*ce.radToDeg(Math.atan(i))},ui=function(){var t;this.renderer.setSize(this.size.width,this.size.height),(t=m(this,ie))==null||t.setSize(this.size.width,this.size.height);let e=window.devicePixelRatio;this.maxPixelRatio&&e>this.maxPixelRatio?e=this.maxPixelRatio:this.minPixelRatio&&e<this.minPixelRatio&&(e=this.minPixelRatio),this.renderer.setPixelRatio(e),this.size.pixelRatio=e},di=function(e){F(this,me,e[0].isIntersecting),m(this,me)?w(this,g,ut).call(this):w(this,g,Ie).call(this)},ht=function(){m(this,me)&&(document.hidden?w(this,g,Ie).call(this):w(this,g,ut).call(this))},ut=function(){if(m(this,ne))return;const e=()=>{F(this,De,requestAnimationFrame(e)),m(this,V).delta=m(this,ge).getDelta(),m(this,V).elapsed+=m(this,V).delta,this.onBeforeRender(m(this,V)),this.render(),this.onAfterRender(m(this,V))};F(this,ne,!0),m(this,ge).start(),e()},Ie=function(){m(this,ne)&&(cancelAnimationFrame(m(this,De)),F(this,ne,!1),m(this,ge).stop())},fi=function(){this.renderer.render(this.scene,this.camera)},gi=function(){var e,t;window.removeEventListener("resize",w(this,g,Be).bind(this)),(e=m(this,ue))==null||e.disconnect(),(t=m(this,de))==null||t.disconnect(),document.removeEventListener("visibilitychange",w(this,g,ht).bind(this))};var We,mi;class qi{constructor(e){k(this,We);y(this,"config");y(this,"positionData");y(this,"velocityData");y(this,"sizeData");y(this,"center",new P);this.config=e,this.positionData=new Float32Array(3*e.count).fill(0),this.velocityData=new Float32Array(3*e.count).fill(0),this.sizeData=new Float32Array(e.count).fill(1),this.center=new P,w(this,We,mi).call(this),this.setSizes()}setSizes(){const{config:e,sizeData:t}=this;t[0]=e.size0;for(let i=1;i<e.count;i++)t[i]=ce.randFloat(e.minSize,e.maxSize)}update(e){const{config:t,center:i,positionData:r,sizeData:l,velocityData:a}=this;let o=0;t.controlSphere0&&(o=1,new P().fromArray(r,0).lerp(i,.1).toArray(r,0),new P(0,0,0).toArray(a,0));for(let u=o;u<t.count;u++){const p=3*u,c=new P().fromArray(r,p),f=new P().fromArray(a,p);f.y-=e.delta*t.gravity*l[u],f.multiplyScalar(t.friction),f.clampLength(0,t.maxVelocity),c.add(f),c.toArray(r,p),f.toArray(a,p)}for(let u=o;u<t.count;u++){const p=3*u,c=new P().fromArray(r,p),f=new P().fromArray(a,p),x=l[u];for(let _=u+1;_<t.count;_++){const R=3*_,E=new P().fromArray(r,R),O=new P().fromArray(a,R),U=new P().copy(E).sub(c),pe=U.length(),ve=x+l[_];if(pe<ve){const Ce=ve-pe,j=U.normalize().multiplyScalar(.5*Ce),Pe=j.clone().multiplyScalar(Math.max(f.length(),1));c.sub(j),f.sub(Pe),c.toArray(r,p),f.toArray(a,p),E.add(j),O.add(j.clone().multiplyScalar(Math.max(O.length(),1))),E.toArray(r,R),O.toArray(a,R)}}if(t.controlSphere0){const _=new P().copy(new P().fromArray(r,0)).sub(c),R=_.length(),E=x+l[0];if(R<E){const O=_.normalize().multiplyScalar(E-R),U=O.clone().multiplyScalar(Math.max(f.length(),2));c.sub(O),f.sub(U)}}Math.abs(c.x)+x>t.maxX&&(c.x=Math.sign(c.x)*(t.maxX-x),f.x=-f.x*t.wallBounce),t.gravity===0?Math.abs(c.y)+x>t.maxY&&(c.y=Math.sign(c.y)*(t.maxY-x),f.y=-f.y*t.wallBounce):c.y-x<-t.maxY&&(c.y=-t.maxY+x,f.y=-f.y*t.wallBounce);const b=Math.max(t.maxZ,t.maxSize);Math.abs(c.z)+x>b&&(c.z=Math.sign(c.z)*(t.maxZ-x),f.z=-f.z*t.wallBounce),c.toArray(r,p),f.toArray(a,p)}}}We=new WeakSet,mi=function(){const{config:e,positionData:t}=this;this.center.toArray(t,0);for(let i=1;i<e.count;i++){const r=3*i;t[r]=ce.randFloatSpread(2*e.maxX),t[r+1]=ce.randFloatSpread(2*e.maxY),t[r+2]=ce.randFloatSpread(2*e.maxZ)}};class Ji extends Fi{constructor(t){super(t);y(this,"uniforms",{thicknessDistortion:{value:.1},thicknessAmbient:{value:0},thicknessAttenuation:{value:.1},thicknessPower:{value:2},thicknessScale:{value:10}});y(this,"onBeforeCompile2");this.defines={USE_UV:""},this.onBeforeCompile=i=>{Object.assign(i.uniforms,this.uniforms),i.fragmentShader=`
        uniform float thicknessPower;
        uniform float thicknessScale;
        uniform float thicknessDistortion;
        uniform float thicknessAmbient;
        uniform float thicknessAttenuation;
        `+i.fragmentShader,i.fragmentShader=i.fragmentShader.replace("void main() {",`
        void RE_Direct_Scattering(const in IncidentLight directLight, const in vec2 uv, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, inout ReflectedLight reflectedLight) {
          vec3 scatteringHalf = normalize(directLight.direction + (geometryNormal * thicknessDistortion));
          float scatteringDot = pow(saturate(dot(geometryViewDir, -scatteringHalf)), thicknessPower) * thicknessScale;
          #ifdef USE_COLOR
            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * vColor;
          #else
            vec3 scatteringIllu = (scatteringDot + thicknessAmbient) * diffuse;
          #endif
          reflectedLight.directDiffuse += scatteringIllu * thicknessAttenuation * directLight.color;
        }

        void main() {
        `);const r=Bi.lights_fragment_begin.replaceAll("RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );",`
          RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
          RE_Direct_Scattering(directLight, vUv, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, reflectedLight);
        `);i.fragmentShader=i.fragmentShader.replace("#include <lights_fragment_begin>",r),this.onBeforeCompile2&&this.onBeforeCompile2(i)}}}const Ki={count:200,colors:[0,0,0],ambientColor:16777215,ambientIntensity:1,lightIntensity:200,materialParams:{metalness:.5,roughness:.5,clearcoat:1,clearcoatRoughness:.15},minSize:.5,maxSize:1,size0:1,gravity:.5,friction:.9975,wallBounce:.95,maxVelocity:.15,maxX:5,maxY:5,maxZ:2,controlSphere0:!1,followCursor:!0},ae=new Qt;let ot=!1;const N=new rt,te=new Map;function Qi(s){const e={position:new rt,nPosition:new rt,hover:!1,onEnter:()=>{},onMove:()=>{},onClick:()=>{},onLeave:()=>{},...s};return te.has(s.domElement)||(te.set(s.domElement,e),ot||(document.body.addEventListener("pointermove",Ut),document.body.addEventListener("pointerleave",Zt),document.body.addEventListener("click",jt),ot=!0)),e.dispose=()=>{te.delete(s.domElement),te.size===0&&(document.body.removeEventListener("pointermove",Ut),document.body.removeEventListener("pointerleave",Zt),document.body.removeEventListener("click",jt),ot=!1)},e}function Ut(s){N.set(s.clientX,s.clientY);for(const[e,t]of te){const i=e.getBoundingClientRect();vi(i)?(pi(t,i),t.hover||(t.hover=!0,t.onEnter(t)),t.onMove(t)):t.hover&&(t.hover=!1,t.onLeave(t))}}function jt(s){N.set(s.clientX,s.clientY);for(const[e,t]of te){const i=e.getBoundingClientRect();pi(t,i),vi(i)&&t.onClick(t)}}function Zt(){for(const s of te.values())s.hover&&(s.hover=!1,s.onLeave(s))}function pi(s,e){s.position.set(N.x-e.left,N.y-e.top),s.nPosition.set(s.position.x/e.width*2-1,-s.position.y/e.height*2+1)}function vi(s){return N.x>=s.left&&N.x<=s.left+s.width&&N.y>=s.top&&N.y<=s.top+s.height}var Ge,yi;class $i extends Kt{constructor(t,i={}){const r={...Ki,...i},l=new Hi,o=new Li(t).fromScene(l).texture,u=new Ti,p=new Ji({envMap:o,...r.materialParams});p.envMapRotation.x=-Math.PI/2;super(u,p,r.count);k(this,Ge);y(this,"config");y(this,"physics");y(this,"ambientLight");y(this,"light");this.config=r,this.physics=new qi(r),w(this,Ge,yi).call(this),this.setColors(r.colors)}setColors(t){if(Array.isArray(t)&&t.length>1){const i=function(r){let l=r,a=[];return l.forEach(o=>{a.push(new st(o))}),{setColors:o=>{l=o,a=[],l.forEach(u=>{a.push(new st(u))})},getColorAt:(o,u=new st)=>{const c=Math.max(0,Math.min(1,o))*(l.length-1),f=Math.floor(c),x=a[f];if(f>=l.length-1)return x.clone();const b=c-f,_=a[f+1];return u.r=x.r+b*(_.r-x.r),u.g=x.g+b*(_.g-x.g),u.b=x.b+b*(_.b-x.b),u}}}(t);for(let r=0;r<this.count;r++)this.setColorAt(r,i.getColorAt(r/this.count)),r===0&&this.light.color.copy(i.getColorAt(r/this.count));if(!this.instanceColor)return;this.instanceColor.needsUpdate=!0}}update(t){this.physics.update(t);for(let i=0;i<this.count;i++)ae.position.fromArray(this.physics.positionData,3*i),i===0&&this.config.followCursor===!1?ae.scale.setScalar(0):ae.scale.setScalar(this.physics.sizeData[i]),ae.updateMatrix(),this.setMatrixAt(i,ae.matrix),i===0&&this.light.position.copy(ae.position);this.instanceMatrix.needsUpdate=!0}}Ge=new WeakSet,yi=function(){this.ambientLight=new Oi(this.config.ambientColor,this.config.ambientIntensity),this.add(this.ambientLight),this.light=new Jt(this.config.colors[0],this.config.lightIntensity),this.add(this.light)};function en(s,e={}){const t=new Zi({canvas:s,size:"parent",rendererOptions:{antialias:!0,alpha:!0}});let i;t.renderer.toneMapping=Pi,t.camera.position.set(0,0,20),t.camera.lookAt(0,0,0),t.cameraMaxAspect=1.5,t.resize(),p(e);const r=new Yi,l=new Xi(new P(0,0,1),0),a=new P;let o=!1;const u=Qi({domElement:s,onMove(){r.setFromCamera(u.nPosition,t.camera),t.camera.getWorldDirection(l.normal),r.ray.intersectPlane(l,a),i.physics.center.copy(a),i.config.controlSphere0=!0},onLeave(){i.config.controlSphere0=!1}});function p(c){i&&(t.clear(),t.scene.remove(i)),i=new $i(t.renderer,c),t.scene.add(i)}return t.onBeforeRender=c=>{o||i.update(c)},t.onAfterResize=c=>{i.config.maxX=c.wWidth/2,i.config.maxY=c.wHeight/2},{three:t,get spheres(){return i},setCount(c){p({...i.config,count:c})},togglePause(){o=!o},dispose(){var c;(c=u.dispose)==null||c.call(u),t.dispose()}}}const on=({className:s="",followCursor:e=!0,...t})=>{const i=nt.useRef(null),r=nt.useRef(null);return nt.useEffect(()=>{const l=i.current;if(l)return r.current=en(l,{followCursor:e,...t}),()=>{r.current&&r.current.dispose()}},[]),Ci.jsx("canvas",{className:s,ref:i,style:{width:"100%",height:"100%"}})};export{on as default};
